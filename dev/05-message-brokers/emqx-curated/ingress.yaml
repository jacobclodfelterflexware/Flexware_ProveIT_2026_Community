---
# IngressRouteTCP for MQTT (standard)
apiVersion: traefik.io/v1alpha1
kind: IngressRouteTCP
metadata:
  name: emqx-mqtt
  namespace: emqx-curated
  labels:
    app: emqx
    component: broker-curated
spec:
  entryPoints:
    - mqtt-curated
  routes:
  - match: HostSNI(`*`)
    services:
    - name: emqx-broker
      port: YOUR_MQTT_PORT
---
# IngressRouteTCP for MQTT over TLS
apiVersion: traefik.io/v1alpha1
kind: IngressRouteTCP
metadata:
  name: emqx-mqtts
  namespace: emqx-curated
  labels:
    app: emqx
    component: broker-curated
spec:
  entryPoints:
    - mqtts-curated
  routes:
  - match: HostSNI(`*`)
    services:
    - name: emqx-broker
      port: YOUR_MQTT_SSL_PORT
---
# IngressRouteTCP for MQTT over WebSocket
apiVersion: traefik.io/v1alpha1
kind: IngressRouteTCP
metadata:
  name: emqx-ws
  namespace: emqx-curated
  labels:
    app: emqx
    component: broker-curated
spec:
  entryPoints:
    - mqtt-ws-curated
  routes:
  - match: HostSNI(`*`)
    services:
    - name: emqx-broker
      port: YOUR_MQTT_WS_PORT
---
# IngressRouteTCP for MQTT over WSS
apiVersion: traefik.io/v1alpha1
kind: IngressRouteTCP
metadata:
  name: emqx-wss
  namespace: emqx-curated
  labels:
    app: emqx
    component: broker-curated
spec:
  entryPoints:
    - mqtt-wss-curated
  routes:
  - match: HostSNI(`*`)
    services:
    - name: emqx-broker
      port: YOUR_MQTT_WSS_PORT
---
# IngressRoute for Dashboard (HTTP)
apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
  name: emqx-dashboard
  namespace: emqx-curated
  labels:
    app: emqx
    component: broker-curated
spec:
  entryPoints:
    - emqx
  routes:
  - match: PathPrefix(`/`)
    kind: Rule
    services:
    - name: emqx-broker
      port: YOUR_EMQX_DASHBOARD_PORT
